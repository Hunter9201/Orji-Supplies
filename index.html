<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>Orji Supplies – Complete Marketplace</title>
  <meta name="description" content="Everything from electronics to groceries, fashion to furniture. Uganda's #1 wholesale & retail marketplace. 10,000+ products." />
  <meta name="keywords" content="Uganda marketplace, wholesale Uganda, retail Kampala, electronics Uganda, groceries delivery" />

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="https://i.postimg.cc/Kjyz2mXg/Chat-GPT-Image-Sep-9-2025-08-55-57-AM.png" />
  <link rel="shortcut icon" href="https://i.postimg.cc/Kjyz2mXg/Chat-GPT-Image-Sep-9-2025-08-55-57-AM.png" />
  <link rel="apple-touch-icon" href="https://i.postimg.cc/Kjyz2mXg/Chat-GPT-Image-Sep-9-2025-08-55-57-AM.png" />

  <!-- Google Fonts & Font Awesome -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

  <style>
    /* ===== RESET & VARIABLES ===== */
    :root {
      --primary: #2563eb;
      --primary-dark: #1d4ed8;
      --primary-light: #dbeafe;
      --accent: #7c3aed;
      --success: #16a34a;
      --warning: #f59e0b;
      --danger: #dc2626;
      --dark: #0f172a;
      --gray-dark: #334155;
      --gray: #64748b;
      --gray-light: #e2e8f0;
      --light: #f8fafc;
      --white: #ffffff;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.05), 0 1px 2px rgba(0,0,0,0.1);
      --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.05);
      --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.05);
      --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.05);
      --radius-sm: 6px;
      --radius-md: 10px;
      --radius-lg: 16px;
      --radius-xl: 24px;
      --radius-full: 9999px;
      --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    html {
      scroll-behavior: smooth;
      scroll-padding-top: 80px;
    }

    body {
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      background: var(--light);
      color: var(--dark);
      line-height: 1.5;
      font-size: 14px;
      overflow-x: hidden;
    }

    /* ===== UTILITY CLASSES ===== */
    .container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 0 16px;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 10px 20px;
      border: none;
      border-radius: var(--radius-md);
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      transition: var(--transition);
      background: var(--white);
      color: var(--dark);
      box-shadow: var(--shadow-sm);
      touch-action: manipulation;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
    }
    .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); }

    .btn-outline {
      background: transparent;
      border: 1px solid var(--gray-light);
      color: var(--dark);
    }
    .btn-outline:hover { background: var(--light); }

    .btn-whatsapp { background: #25D366; color: white; }
    .btn-whatsapp:hover { background: #128C7E; }

    /* ===== HEADER ===== */
    .header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(255,255,255,0.8);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--gray-light);
      box-shadow: var(--shadow-sm);
    }

    .header-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 70px;
      padding: 0 16px;
      max-width: 1280px;
      margin: 0 auto;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
    }
    .logo-icon {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 800;
      font-size: 1.5rem;
    }
    .logo-text {
      font-weight: 700;
      font-size: 1.3rem;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .nav-links {
      display: none;
      gap: 24px;
      list-style: none;
    }
    .nav-links a {
      text-decoration: none;
      color: var(--dark);
      font-weight: 500;
      transition: var(--transition);
    }
    .nav-links a:hover { color: var(--primary); }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .search-container {
      position: relative;
      display: none; /* hidden on mobile, we'll use prominent search */
    }
    .search-bar {
      width: 240px;
      padding: 8px 36px 8px 12px;
      border: 1px solid var(--gray-light);
      border-radius: var(--radius-full);
      background: var(--white);
      font-size: 0.9rem;
      transition: var(--transition);
    }
    .search-bar:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
    }
    .search-btn {
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: var(--gray);
      cursor: pointer;
      font-size: 1rem;
    }

    .cart-btn, .user-btn, .menu-toggle {
      background: none;
      border: none;
      font-size: 1.2rem;
      color: var(--dark);
      cursor: pointer;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }
    .cart-btn:hover, .user-btn:hover, .menu-toggle:hover {
      background: var(--primary-light);
      color: var(--primary);
    }
    .cart-count {
      position: absolute;
      top: -4px;
      right: -4px;
      background: var(--danger);
      color: white;
      font-size: 0.7rem;
      font-weight: 700;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* ===== MOBILE MENU ===== */
    .mobile-menu {
      position: fixed;
      top: 70px;
      left: 0;
      right: 0;
      background: white;
      z-index: 99;
      box-shadow: var(--shadow-lg);
      transform: translateY(-100%);
      opacity: 0;
      transition: var(--transition);
      border-top: 1px solid var(--gray-light);
      max-height: calc(100vh - 70px);
      overflow-y: auto;
    }
    .mobile-menu.active {
      transform: translateY(0);
      opacity: 1;
    }
    .mobile-menu-content { padding: 20px; }
    .mobile-nav-link {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      text-decoration: none;
      color: var(--dark);
      font-weight: 600;
      border-radius: var(--radius-md);
      transition: var(--transition);
    }
    .mobile-nav-link:hover { background: var(--primary-light); color: var(--primary); }

    /* ===== LANGUAGE SWITCHER ===== */
    .language-switcher {
      position: fixed;
      top: 80px;
      right: 16px;
      z-index: 101;
      background: white;
      border-radius: var(--radius-full);
      padding: 4px;
      box-shadow: var(--shadow-md);
      border: 1px solid var(--gray-light);
    }
    .language-btn {
      padding: 6px 12px;
      border: none;
      background: transparent;
      border-radius: var(--radius-full);
      font-weight: 600;
      font-size: 0.8rem;
      cursor: pointer;
      transition: var(--transition);
      color: var(--gray);
    }
    .language-btn.active { background: var(--primary); color: white; }

    /* ===== HERO SECTION ===== */
    .hero {
      background: linear-gradient(135deg, rgba(0,0,0,0.8), rgba(0,0,0,0.6)), url('https://i.postimg.cc/Kjyz2mXg/Chat-GPT-Image-Sep-9-2025-08-55-57-AM.png') center/cover;
      color: white;
      padding: 60px 0;
      text-align: center;
    }
    .hero h1 {
      font-size: 2.2rem;
      font-weight: 800;
      margin-bottom: 16px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }
    .hero-subtitle {
      font-size: 1rem;
      max-width: 600px;
      margin: 0 auto 32px;
      opacity: 0.9;
    }
    .hero-cta {
      display: flex;
      gap: 16px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .hero-cta .btn { width: auto; }

    /* ===== FILTER BAR (WITH PROMINENT SEARCH) ===== */
    .filter-bar {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin: 20px 0;
    }
    .filter-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .filter-select {
      padding: 8px 12px;
      border: 1px solid var(--gray-light);
      border-radius: var(--radius-md);
      background: var(--white);
      font-size: 0.9rem;
      cursor: pointer;
    }

    /* Prominent search bar */
    .prominent-search {
      flex: 1 1 100%;
      display: flex;
      gap: 8px;
      margin-bottom: 8px;
    }
    .prominent-search .search-bar {
      flex: 1;
      width: auto;
      padding: 12px 16px;
      font-size: 1rem;
    }
    .prominent-search .search-btn {
      position: static;
      transform: none;
      width: 48px;
      height: 48px;
      border-radius: var(--radius-md);
      background: var(--primary);
      color: white;
      font-size: 1.2rem;
    }
    .prominent-search .search-btn:hover {
      background: var(--primary-dark);
    }

    @media (min-width: 640px) {
      .prominent-search {
        flex: 1 1 auto;
        margin-bottom: 0;
      }
    }

    /* ===== PRODUCT GRID ===== */
    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px,1fr));
      gap: 16px;
      margin: 24px 0;
    }
    .product-card {
      background: white;
      border-radius: var(--radius-lg);
      overflow: hidden;
      box-shadow: var(--shadow-sm);
      transition: var(--transition);
      position: relative;
      display: flex;
      flex-direction: column;
    }
    .product-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }

    .product-badges {
      position: absolute;
      top: 8px;
      left: 8px;
      z-index: 2;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .badge {
      padding: 4px 8px;
      font-size: 0.7rem;
      font-weight: 700;
      border-radius: var(--radius-full);
      text-transform: uppercase;
    }
    .badge.sale { background: var(--danger); color: white; }
    .badge.new { background: var(--success); color: white; }
    .badge.popular { background: var(--warning); color: white; }

    .product-image-slider {
      position: relative;
      height: 160px;
      overflow: hidden;
      background: var(--light);
    }
    .product-image-slider .swiper-slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    /* Hide ugly navigation arrows, keep pagination */
    .product-image-slider .swiper-button-next,
    .product-image-slider .swiper-button-prev {
      display: none;
    }
    .product-image-slider .swiper-pagination-bullet {
      background: white;
      opacity: 0.6;
    }
    .product-image-slider .swiper-pagination-bullet-active {
      background: var(--primary);
      opacity: 1;
    }

    .product-actions {
      position: absolute;
      top: 8px;
      right: 8px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      z-index: 3;
    }
    .action-btn {
      width: 34px;
      height: 34px;
      border-radius: 50%;
      background: white;
      border: none;
      box-shadow: var(--shadow-md);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition);
      color: var(--dark);
    }
    .action-btn:hover { background: var(--primary); color: white; }
    .action-btn.wishlist.active { color: var(--danger); }

    .product-info {
      padding: 12px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    .product-category {
      color: var(--gray);
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .product-name {
      font-weight: 600;
      font-size: 0.95rem;
      margin: 4px 0 8px;
      line-height: 1.3;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    .product-rating {
      display: flex;
      align-items: center;
      gap: 4px;
      margin-bottom: 8px;
    }
    .stars {
      color: #fbbf24;
      font-size: 0.8rem;
    }
    .rating-count {
      color: var(--gray);
      font-size: 0.7rem;
    }
    .product-price {
      margin-top: auto;
      display: flex;
      align-items: baseline;
      gap: 6px;
      flex-wrap: wrap;
    }
    .current-price {
      font-size: 1.2rem;
      font-weight: 800;
      color: var(--primary);
    }
    .original-price {
      font-size: 0.9rem;
      color: var(--gray);
      text-decoration: line-through;
    }
    .price-unit {
      font-size: 0.8rem;
      color: var(--gray);
    }
    .stock-status {
      font-size: 0.75rem;
      margin-top: 6px;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .in-stock { color: var(--success); }
    .low-stock { color: var(--warning); }
    .out-of-stock { color: var(--danger); }
    .add-to-cart {
      margin-top: 12px;
      width: 100%;
      padding: 10px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: var(--radius-md);
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
    }
    .add-to-cart:hover { background: var(--primary-dark); }

    /* ===== CART SIDEBAR (NO DELIVERY FEE) ===== */
    .cart-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      z-index: 199;
      opacity: 0;
      visibility: hidden;
      transition: var(--transition);
      backdrop-filter: blur(4px);
    }
    .cart-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    .cart-sidebar {
      position: fixed;
      top: 0;
      right: -100%;
      width: 100%;
      max-width: 380px;
      height: 100vh;
      background: white;
      z-index: 200;
      transition: var(--transition);
      box-shadow: var(--shadow-xl);
      display: flex;
      flex-direction: column;
    }
    .cart-sidebar.open { right: 0; }
    .cart-header {
      padding: 16px;
      border-bottom: 1px solid var(--gray-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .cart-close {
      background: none;
      border: none;
      font-size: 1.2rem;
      cursor: pointer;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .cart-close:hover { background: var(--gray-light); }
    .cart-body {
      flex: 1;
      overflow-y: auto;
      padding: 16px;
    }
    .cart-empty {
      text-align: center;
      padding: 40px 16px;
      color: var(--gray);
    }
    .cart-item {
      display: flex;
      gap: 12px;
      padding: 12px 0;
      border-bottom: 1px solid var(--gray-light);
    }
    .cart-item-image {
      width: 60px;
      height: 60px;
      border-radius: var(--radius-sm);
      overflow: hidden;
      flex-shrink: 0;
    }
    .cart-item-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .cart-item-info { flex: 1; }
    .cart-item-name {
      font-weight: 600;
      margin-bottom: 4px;
    }
    .cart-item-price {
      color: var(--primary);
      font-weight: 700;
    }
    .cart-item-actions {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 8px;
    }
    .qty-btn {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      border: 1px solid var(--gray-light);
      background: white;
      cursor: pointer;
    }
    .remove-item {
      color: var(--danger);
      background: none;
      border: none;
      cursor: pointer;
      font-size: 0.9rem;
      margin-left: auto;
    }
    .cart-footer {
      padding: 16px;
      border-top: 1px solid var(--gray-light);
      background: white;
    }
    .summary-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
    }
    .summary-total {
      font-size: 1.1rem;
      font-weight: 800;
      color: var(--primary);
      border-top: 1px solid var(--gray-light);
      padding-top: 8px;
      margin-top: 8px;
    }
    .whatsapp-checkout {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      width: 100%;
      padding: 14px;
      background: #25D366;
      color: white;
      border: none;
      border-radius: var(--radius-md);
      font-weight: 600;
      margin-top: 16px;
      text-decoration: none;
    }

    /* ===== QUICK VIEW MODAL ===== */
    .quick-view-modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      z-index: 300;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      opacity: 0;
      visibility: hidden;
      transition: var(--transition);
    }
    .quick-view-modal.active {
      opacity: 1;
      visibility: visible;
    }
    .quick-view-content {
      background: white;
      border-radius: var(--radius-lg);
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
    }
    .quick-view-header {
      padding: 16px;
      border-bottom: 1px solid var(--gray-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .quick-view-close {
      background: none;
      border: none;
      font-size: 1.2rem;
      cursor: pointer;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .quick-view-body { padding: 16px; }
    /* Hide arrows in quick view as well */
    .quick-view-modal .swiper-button-next,
    .quick-view-modal .swiper-button-prev {
      display: none;
    }

    /* ===== TOAST ===== */
    .toast-container {
      position: fixed;
      bottom: 20px;
      left: 16px;
      right: 16px;
      z-index: 400;
      display: flex;
      flex-direction: column;
      gap: 8px;
      pointer-events: none;
    }
    .toast {
      background: var(--dark);
      color: white;
      padding: 12px 16px;
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-lg);
      display: flex;
      align-items: center;
      gap: 10px;
      animation: slideIn 0.3s ease-out;
    }
    .toast.success { background: var(--success); }
    .toast.error { background: var(--danger); }
    .toast.warning { background: var(--warning); }
    .toast.info { background: var(--primary); }
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    /* ===== FOOTER ===== */
    .footer {
      background: var(--dark);
      color: white;
      padding: 40px 0 20px;
      margin-top: 40px;
    }
    .footer-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px,1fr));
      gap: 32px;
    }
    .footer-section h3 {
      font-size: 1rem;
      margin-bottom: 16px;
      position: relative;
      padding-bottom: 8px;
    }
    .footer-section h3::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 30px;
      height: 2px;
      background: var(--primary);
    }
    .footer-links {
      list-style: none;
    }
    .footer-links li { margin-bottom: 8px; }
    .footer-links a {
      color: #cbd5e1;
      text-decoration: none;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .footer-links a:hover { color: white; padding-left: 4px; }
    .newsletter-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 12px;
    }
    .newsletter-input {
      padding: 10px 12px;
      border: 1px solid #475569;
      border-radius: var(--radius-md);
      background: #1e293b;
      color: white;
      width: 100%;
    }
    .newsletter-btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 10px;
      border-radius: var(--radius-md);
      cursor: pointer;
      font-weight: 600;
    }
    .footer-bottom {
      border-top: 1px solid #334155;
      padding-top: 16px;
      margin-top: 32px;
      text-align: center;
      color: #94a3b8;
      font-size: 0.8rem;
    }

    /* ===== RESPONSIVE ===== */
    @media (min-width: 768px) {
      .nav-links { display: flex; }
      .search-container { display: block; }
      .menu-toggle { display: none; }
      .products-grid { grid-template-columns: repeat(auto-fill, minmax(200px,1fr)); }
    }
    @media (min-width: 1024px) {
      .products-grid { grid-template-columns: repeat(auto-fill, minmax(220px,1fr)); }
    }

    /* ===== TIGRINYA FONT SUPPORT ===== */
    body.tigrinya {
      font-family: 'Inter', 'Noto Sans Ethiopic', sans-serif;
    }
  </style>
</head>
<body>
  <!-- Language Switcher -->
  <div class="language-switcher">
    <button class="language-btn active" data-lang="en">EN</button>
    <button class="language-btn" data-lang="ti">TI</button>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="header-container">
      <a href="#" class="logo">
        <div class="logo-icon">O</div>
        <span class="logo-text" data-en="Orji Supplies" data-ti="ኦርጂ ኣቑሑት">Orji Supplies</span>
      </a>

      <nav class="nav-main">
        <ul class="nav-links">
          <li><a href="#home" class="nav-link" data-en="Home" data-ti="ቤት">Home</a></li>
          <li><a href="#products" class="nav-link" data-en="Products" data-ti="ዕብየትታት">Products</a></li>
          <li><a href="#wholesale" class="nav-link" data-en="Wholesale" data-ti="ጅምላ">Wholesale</a></li>
          <li><a href="#about" class="nav-link" data-en="About" data-ti="ብዛዕባ">About</a></li>
        </ul>
      </nav>

      <div class="header-actions">
        <div class="search-container">
          <!-- Header search (less prominent) -->
          <input type="text" class="search-bar" id="headerSearchInput" placeholder="Search..." data-en="Search..." data-ti="ምድላይ..." />
          <button class="search-btn" id="headerSearchBtn"><i class="fas fa-search"></i></button>
          <div class="search-results-dropdown" id="searchResults"></div>
        </div>

        <button class="cart-btn" id="cartBtn">
          <i class="fas fa-shopping-cart"></i>
          <span class="cart-count" id="cartCount">0</span>
        </button>

        <button class="user-btn" id="userBtn"><i class="fas fa-user"></i></button>

        <button class="menu-toggle" id="menuToggle"><i class="fas fa-bars"></i></button>
      </div>
    </div>
  </header>

  <!-- Mobile Menu -->
  <div class="mobile-menu" id="mobileMenu">
    <div class="mobile-menu-content">
      <a href="#home" class="mobile-nav-link" data-en="Home" data-ti="ቤት"><i class="fas fa-home"></i> <span>Home</span></a>
      <a href="#products" class="mobile-nav-link" data-en="Products" data-ti="ዕብየትታት"><i class="fas fa-shopping-bag"></i> <span>Products</span></a>
      <a href="#wholesale" class="mobile-nav-link" data-en="Wholesale" data-ti="ጅምላ"><i class="fas fa-building"></i> <span>Wholesale</span></a>
      <a href="#about" class="mobile-nav-link" data-en="About" data-ti="ብዛዕባ"><i class="fas fa-info-circle"></i> <span>About</span></a>
    </div>
  </div>

  <!-- Main Content -->
  <main class="main-content" id="mainContent">
    <!-- Hero Section -->
    <section class="hero" id="home">
      <div class="hero-content container">
        <h1 data-en="Everything You Need, Delivered" data-ti="ኩሉ እትደልዮ ኣብ ደርቢኻ">Everything You Need, Delivered</h1>
        <p class="hero-subtitle" data-en="Uganda's #1 wholesale & retail marketplace. From groceries to electronics, home goods to industrial supplies." data-ti="ኡጋንዳ ቀዳማይ ጅምላን ሸቃሎን ዕዳጋ። ካብ መግብታት ናብ ኤሌክትሮኒክስ።">Uganda's #1 wholesale & retail marketplace. From groceries to electronics, home goods to industrial supplies.</p>
        <div class="hero-cta">
          <a href="#products" class="btn btn-primary" data-en="Shop Now" data-ti="ሕጂ ይግዝኡ"><i class="fas fa-shopping-basket"></i> <span>Shop Now</span></a>
          <a href="https://wa.me/256783501222" class="btn btn-whatsapp" data-en="Chat on WhatsApp" data-ti="በይ WhatsApp ቃለ"><i class="fab fa-whatsapp"></i> <span>Chat on WhatsApp</span></a>
        </div>
      </div>
    </section>

    <!-- Prominent Search + Filter Bar -->
    <div class="container">
      <div class="filter-bar">
        <!-- Prominent search input (visible on all devices) -->
        <div class="prominent-search">
          <input type="text" class="search-bar" id="prominentSearchInput" placeholder="Search for anything..." data-en="Search for anything..." data-ti="ምድላይ..." />
          <button class="search-btn" id="prominentSearchBtn"><i class="fas fa-search"></i></button>
        </div>

        <div class="filter-group">
          <select class="filter-select" id="sortSelect">
            <option value="popular" data-en="Most Popular" data-ti="ዝዓበየ">Most Popular</option>
            <option value="price-low" data-en="Price: Low to High" data-ti="ዋጋ: ትሑት ናብ ልዕሊ">Price: Low to High</option>
            <option value="price-high" data-en="Price: High to Low" data-ti="ዋጋ: ልዕሊ ናብ ትሑት">Price: High to Low</option>
            <option value="newest" data-en="Newest" data-ti="ሓደስቲ">Newest</option>
          </select>
          <select class="filter-select" id="stockFilter">
            <option value="all" data-en="All Stock" data-ti="ኩሉ ስቶክ">All Stock</option>
            <option value="in-stock" data-en="In Stock" data-ti="ኣብ ስቶክ">In Stock</option>
            <option value="low-stock" data-en="Low Stock" data-ti="ትሑት ስቶክ">Low Stock</option>
          </select>
        </div>
        <button class="btn btn-outline" id="filterBtn" data-en="Filters" data-ti="ፊልተር"><i class="fas fa-sliders-h"></i> <span>Filters</span></button>
      </div>
    </div>

    <!-- Products Grid (all products shown at once) -->
    <section class="section" id="products">
      <div class="container">
        <h2 class="section-title" data-en="Products" data-ti="ዕብየትታት">Products</h2>
        <div id="productsLoading" class="loading" style="display: none; text-align: center; padding: 40px;">
          <i class="fas fa-spinner fa-spin fa-2x"></i>
          <p data-en="Loading products..." data-ti="ዕብየትታት ይመጽእ...">Loading products...</p>
        </div>
        <div class="products-grid" id="productsGrid"></div>
        <!-- No "Load More" button – all products are shown -->
      </div>
    </section>

    <!-- Wholesale Section -->
    <section class="section" id="wholesale">
      <div class="container">
        <h2 class="section-title" data-en="Wholesale Advantages" data-ti="ጅምላ ጥቕሚታት">Wholesale Advantages</h2>
        <div class="products-grid">
          <div class="product-card"><div class="product-info"><h3 data-en="Bulk Discounts" data-ti="ጅምላ ሽልማት">Bulk Discounts</h3><div class="current-price" data-en="Save up to 40%" data-ti="ክሳብ 40% ዓቢ">Save up to 40%</div></div></div>
          <div class="product-card"><div class="product-info"><h3 data-en="Free Delivery" data-ti="ነጻ ደርቢ">Free Delivery</h3><div class="current-price" data-en="Orders above 500,000 UGX" data-ti="ትእዛዝ ካብ 500,000 ሻሂ">Orders above 500,000 UGX</div></div></div>
          <div class="product-card"><div class="product-info"><h3 data-en="Dedicated Support" data-ti="ብቕዓት ደገፍ">Dedicated Support</h3><div class="current-price" data-en="Personal Account Manager" data-ti="ብቕዓት ሒሳብ ኣማኸር">Personal Account Manager</div></div></div>
          <div class="product-card"><div class="product-info"><h3 data-en="Custom Packaging" data-ti="ብቕዓት ምልጣፍ">Custom Packaging</h3><div class="current-price" data-en="Brand your products" data-ti="ፕሮዳክትታትካ ብራንድ ኣቕርብ">Brand your products</div></div></div>
        </div>
      </div>
    </section>
  </main>

  <!-- Cart Sidebar -->
  <div class="cart-overlay" id="cartOverlay"></div>
  <div class="cart-sidebar" id="cartSidebar">
    <div class="cart-header">
      <h3 data-en="Your Cart" data-ti="ካርትካ">Your Cart</h3>
      <button class="cart-close" id="cartClose"><i class="fas fa-times"></i></button>
    </div>
    <div class="cart-body" id="cartBody"></div>
    <div class="cart-footer" id="cartFooter">
      <div class="summary-row"><span data-en="Subtotal:" data-ti="ንኡስ ጠቕላላ:">Subtotal:</span> <span id="cartSubtotal">USh 0</span></div>
      <div class="summary-row summary-total"><span data-en="Total:" data-ti="ጠቕላላ:">Total:</span> <span id="cartTotal">USh 0</span></div>
      <a href="https://wa.me/256783501222" class="whatsapp-checkout" id="whatsappCheckout" target="_blank" data-en="Checkout on WhatsApp" data-ti="በይ WhatsApp ውጺእ"><i class="fab fa-whatsapp"></i> <span>Checkout on WhatsApp</span></a>
      <button class="btn btn-outline" id="clearCartBtn" style="width:100%; margin-top:10px;" data-en="Clear Cart" data-ti="ካርት ኣፅር"><i class="fas fa-trash"></i> <span>Clear Cart</span></button>
    </div>
  </div>

  <!-- Quick View Modal -->
  <div class="quick-view-modal" id="quickViewModal">
    <div class="quick-view-content">
      <div class="quick-view-header">
        <h3 data-en="Product Details" data-ti="ዝርዝር ዕብየት">Product Details</h3>
        <button class="quick-view-close" id="quickViewClose"><i class="fas fa-times"></i></button>
      </div>
      <div class="quick-view-body" id="quickViewBody"></div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-section">
          <h3 data-en="Orji Supplies" data-ti="ኦርጂ ኣቑሑት">Orji Supplies</h3>
          <p data-en="Uganda's complete marketplace for all your needs." data-ti="ኡጋንዳ ንኩሉ ድሌታትካ ምሉእ ዕዳጋ።">Uganda's complete marketplace for all your needs.</p>
          <div class="contact-info">
            <div><i class="fas fa-map-marker-alt"></i> <span data-en="Discover Plaza, Kampala" data-ti="ዲስካቨር ፕላዛ፣ ካምፓላ">Discover Plaza, Kampala</span></div>
            <div><i class="fas fa-phone"></i> +256 783 501 222</div>
            <div><i class="fab fa-whatsapp"></i> +256 783 501 222</div>
          </div>
        </div>
        <div class="footer-section">
          <h3 data-en="Quick Links" data-ti="ቅልጡፍ ሊንካት">Quick Links</h3>
          <ul class="footer-links">
            <li><a href="#home" data-en="Home" data-ti="ቤት">Home</a></li>
            <li><a href="#products" data-en="Products" data-ti="ዕብየትታት">Products</a></li>
            <li><a href="#wholesale" data-en="Wholesale" data-ti="ጅምላ">Wholesale</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3 data-en="Customer Service" data-ti="ኣገልግሎት ዓሚል">Customer Service</h3>
          <ul class="footer-links">
            <li><a href="#" data-en="Contact Us" data-ti="ርኸብና">Contact Us</a></li>
            <li><a href="#" data-en="FAQ" data-ti="ተደጋጋሚ ሕቶታት">FAQ</a></li>
            <li><a href="#" data-en="Shipping Policy" data-ti="ፖሊሲ ደርቢ">Shipping Policy</a></li>
            <li><a href="#" data-en="Returns & Refunds" data-ti="ምምላስ & ምምላስ ገንዘብ">Returns & Refunds</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3 data-en="Newsletter" data-ti="ዜና መጽሔት">Newsletter</h3>
          <p data-en="Subscribe to get updates" data-ti="ምእንቲ ኽትረክብ ምዝገባ ግበር">Subscribe to get updates</p>
          <form class="newsletter-form" id="newsletterForm">
            <input type="email" class="newsletter-input" placeholder="Your email" data-en="Your email" data-ti="ኢመይልካ" required />
            <button type="submit" class="newsletter-btn" data-en="Subscribe" data-ti="ምዝገባ">Subscribe</button>
          </form>
        </div>
      </div>
      <div class="footer-bottom">
        <p data-en="&copy; 2024 Orji Supplies. All rights reserved. | Kampala, Uganda" data-ti="&copy; 2024 ኦርጂ ኣቑሑት። ኩሉ መሰላት ይዕቀብ። | ካምፓላ፣ ኡጋንዳ">&copy; 2024 Orji Supplies. All rights reserved. | Kampala, Uganda</p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>
    // ===== CONFIGURATION =====
    const CONFIG = {
      whatsappNumber: '256783501222',
      productsSource: 'https://raw.githubusercontent.com/hunter9201/Orji-Supplies/main/products.json'
    };

    // ===== STATE =====
    let state = {
      allProducts: [],
      filteredProducts: [],
      categories: [],
      currentCategory: 'all',
      sortBy: 'popular',
      stockFilter: 'all',
      cart: new Map(),
      wishlist: new Set(),
      searchTerm: '',
      language: 'en'
    };

    // ===== DOM ELEMENTS =====
    const elements = {
      cartBtn: document.getElementById('cartBtn'),
      cartCount: document.getElementById('cartCount'),
      cartSidebar: document.getElementById('cartSidebar'),
      cartOverlay: document.getElementById('cartOverlay'),
      cartClose: document.getElementById('cartClose'),
      cartBody: document.getElementById('cartBody'),
      cartSubtotal: document.getElementById('cartSubtotal'),
      cartTotal: document.getElementById('cartTotal'),
      clearCartBtn: document.getElementById('clearCartBtn'),
      whatsappCheckout: document.getElementById('whatsappCheckout'),
      prominentSearchInput: document.getElementById('prominentSearchInput'),
      prominentSearchBtn: document.getElementById('prominentSearchBtn'),
      headerSearchInput: document.getElementById('headerSearchInput'),
      headerSearchBtn: document.getElementById('headerSearchBtn'),
      searchResults: document.getElementById('searchResults'),
      menuToggle: document.getElementById('menuToggle'),
      mobileMenu: document.getElementById('mobileMenu'),
      productsGrid: document.getElementById('productsGrid'),
      productsLoading: document.getElementById('productsLoading'),
      sortSelect: document.getElementById('sortSelect'),
      stockFilter: document.getElementById('stockFilter'),
      filterBtn: document.getElementById('filterBtn'),
      quickViewModal: document.getElementById('quickViewModal'),
      quickViewClose: document.getElementById('quickViewClose'),
      quickViewBody: document.getElementById('quickViewBody'),
      toastContainer: document.getElementById('toastContainer'),
      newsletterForm: document.getElementById('newsletterForm')
    };

    // ===== UTILITIES =====
    const utils = {
      formatCurrency: (amount) => {
        return 'USh ' + Math.round(amount).toLocaleString('en-UG');
      },
      showToast: (message, type = 'info') => {
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        toast.innerHTML = `<i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i><span>${message}</span>`;
        elements.toastContainer.appendChild(toast);
        setTimeout(() => toast.remove(), 4000);
      },
      debounce: (func, wait) => {
        let timeout;
        return (...args) => {
          clearTimeout(timeout);
          timeout = setTimeout(() => func(...args), wait);
        };
      },
      getPrice: (product) => product.retailPrice,
      saveCart: () => {
        const cartData = Array.from(state.cart.entries()).map(([key, item]) => ({ key, productId: item.product.id, quantity: item.quantity, price: item.price }));
        localStorage.setItem('orji_cart', JSON.stringify(cartData));
      },
      loadCart: () => {
        const saved = localStorage.getItem('orji_cart');
        if (saved) {
          try {
            const cartData = JSON.parse(saved);
            cartData.forEach(item => {
              const product = state.allProducts.find(p => p.id === item.productId);
              if (product) state.cart.set(item.key, { product, quantity: item.quantity, price: item.price });
            });
          } catch (e) {}
        }
      },
      saveWishlist: () => localStorage.setItem('orji_wishlist', JSON.stringify(Array.from(state.wishlist))),
      loadWishlist: () => {
        const saved = localStorage.getItem('orji_wishlist');
        if (saved) try { state.wishlist = new Set(JSON.parse(saved)); } catch (e) {}
      }
    };

    // ===== FETCH PRODUCTS =====
    async function loadProducts() {
      try {
        elements.productsLoading.style.display = 'block';
        const response = await fetch(CONFIG.productsSource + '?t=' + Date.now());
        if (!response.ok) throw new Error('Network error');
        const products = await response.json();
        if (!Array.isArray(products)) throw new Error('Invalid data');

        const processed = products.map(p => ({
          id: p.id || `prod_${Math.random().toString(36).substr(2,9)}`,
          name: p.name || 'Unnamed',
          description: p.desc || 'No description',
          category: p.category || 'other',
          retailPrice: Number(p.retailPrice) || 0,
          wholesalePrice: Number(p.wholesalePrice) || Number(p.retailPrice) || 0,
          moq: p.moq || 1,
          unit: p.unit || 'piece',
          stock: p.stock || 50,
          popular: p.popular || false,
          sale: p.sale || false,
          new: p.new || false,
          rating: p.rating || 4.0,
          images: Array.isArray(p.imgs) && p.imgs.length ? p.imgs : ['https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=800&auto=format&fit=crop']
        }));

        if (processed.length === 0) throw new Error('Empty list');
        state.allProducts = processed;
      } catch (error) {
        console.warn('Using sample products');
        state.allProducts = generateSampleProducts();
        utils.showToast('Using sample products', 'info');
      } finally {
        elements.productsLoading.style.display = 'none';
        applyFilters();
      }
    }

    function generateSampleProducts() {
      const categories = ['books','shoes','clothes','cosmetics','furniture','electronics','groceries'];
      const products = [];
      categories.forEach(cat => {
        for (let i=1; i<=4; i++) {
          products.push({
            id: `sample_${cat}_${i}`,
            name: `${cat.charAt(0).toUpperCase()+cat.slice(1)} Item ${i}`,
            description: 'High quality product',
            category: cat,
            retailPrice: Math.floor(Math.random()*100000)+20000,
            wholesalePrice: Math.floor(Math.random()*80000)+15000,
            moq: 5,
            unit: 'piece',
            stock: Math.floor(Math.random()*100),
            popular: i===1,
            sale: i===2,
            new: i===3,
            rating: (Math.random()*2+3).toFixed(1),
            images: ['https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=800&auto=format&fit=crop']
          });
        }
      });
      return products;
    }

    // ===== APPLY FILTERS =====
    function applyFilters() {
      let filtered = state.allProducts;
      if (state.currentCategory !== 'all') filtered = filtered.filter(p => p.category === state.currentCategory);
      if (state.searchTerm) {
        const term = state.searchTerm.toLowerCase();
        filtered = filtered.filter(p => 
          p.name.toLowerCase().includes(term) || 
          p.description.toLowerCase().includes(term) ||
          p.category.toLowerCase().includes(term)
        );
      }
      if (state.stockFilter === 'in-stock') filtered = filtered.filter(p => p.stock > 20);
      else if (state.stockFilter === 'low-stock') filtered = filtered.filter(p => p.stock > 0 && p.stock <= 20);

      switch (state.sortBy) {
        case 'price-low': filtered.sort((a,b) => utils.getPrice(a) - utils.getPrice(b)); break;
        case 'price-high': filtered.sort((a,b) => utils.getPrice(b) - utils.getPrice(a)); break;
        case 'newest': filtered.sort((a,b) => (b.new ? 1 : 0) - (a.new ? 1 : 0)); break;
        default: filtered.sort((a,b) => (b.popular ? 1 : 0) - (a.popular ? 1 : 0));
      }

      state.filteredProducts = filtered;
      renderProducts(); // show all filtered products at once
    }

    // ===== RENDER PRODUCTS =====
    function renderProducts() {
      if (state.filteredProducts.length === 0) {
        elements.productsGrid.innerHTML = '<div class="text-center" style="grid-column:1/-1; padding:40px;"><i class="fas fa-search fa-3x" style="color:var(--gray-light);"></i><h3>No products found</h3></div>';
      } else {
        elements.productsGrid.innerHTML = state.filteredProducts.map(createProductCard).join('');
      }

      // Initialize Swiper
      setTimeout(() => {
        document.querySelectorAll('.product-image-slider .swiper').forEach(container => {
          new Swiper(container, {
            slidesPerView: 1,
            loop: true,
            autoplay: { delay: 3000, disableOnInteraction: false },
            pagination: { el: container.querySelector('.swiper-pagination'), clickable: true }
          });
        });
      }, 100);
    }

    function createProductCard(p) {
      const price = utils.getPrice(p);
      const original = p.sale ? p.retailPrice * 1.2 : null;
      const inWishlist = state.wishlist.has(p.id);
      const stockClass = p.stock > 20 ? 'in-stock' : p.stock > 0 ? 'low-stock' : 'out-of-stock';
      const stockText = p.stock > 20 ? 'In Stock' : p.stock > 0 ? `Low Stock (${p.stock})` : 'Out of Stock';
      return `
        <div class="product-card" data-id="${p.id}">
          <div class="product-badges">
            ${p.popular ? '<span class="badge popular">Popular</span>' : ''}
            ${p.new ? '<span class="badge new">New</span>' : ''}
            ${p.sale ? '<span class="badge sale">Sale</span>' : ''}
          </div>
          <div class="product-image-slider">
            <div class="swiper">
              <div class="swiper-wrapper">
                ${p.images.map(img => `<div class="swiper-slide"><img src="${img}" alt="${p.name}" loading="lazy" onerror="this.src='https://via.placeholder.com/300?text=No+Image'"></div>`).join('')}
              </div>
              ${p.images.length > 1 ? '<div class="swiper-pagination"></div>' : ''}
            </div>
          </div>
          <div class="product-actions">
            <button class="action-btn wishlist ${inWishlist ? 'active' : ''}" onclick="toggleWishlist('${p.id}')"><i class="fa${inWishlist ? 's' : 'r'} fa-heart"></i></button>
            <button class="action-btn" onclick="quickView('${p.id}')"><i class="fas fa-eye"></i></button>
          </div>
          <div class="product-info">
            <div class="product-category">${p.category}</div>
            <div class="product-name">${p.name}</div>
            <div class="product-rating"><span class="stars">★★★★★</span><span class="rating-count">(${p.rating})</span></div>
            <div class="product-price">
              <span class="current-price">${utils.formatCurrency(price)}</span>
              ${original ? `<span class="original-price">${utils.formatCurrency(original)}</span>` : ''}
              <span class="price-unit">/${p.unit}</span>
            </div>
            <div class="stock-status ${stockClass}"><i class="fas fa-${p.stock>20 ? 'check-circle' : p.stock>0 ? 'exclamation-circle' : 'times-circle'}"></i> ${stockText}</div>
            <button class="add-to-cart" onclick="addToCart('${p.id}')" ${p.stock===0?'disabled':''}><i class="fas fa-cart-plus"></i> Add to Cart</button>
          </div>
        </div>
      `;
    }

    // ===== CART FUNCTIONS =====
    window.addToCart = (productId) => {
      const product = state.allProducts.find(p => p.id === productId);
      if (!product || product.stock === 0) return;
      const key = productId;
      const price = utils.getPrice(product);
      if (state.cart.has(key)) {
        state.cart.get(key).quantity++;
      } else {
        state.cart.set(key, { product, quantity: 1, price });
      }
      utils.saveCart();
      updateCartUI();
      utils.showToast(`${product.name} added to cart`, 'success');
    };

    function updateCartUI() {
      let totalItems = 0, subtotal = 0;
      state.cart.forEach(item => {
        totalItems += item.quantity;
        subtotal += item.quantity * item.price;
      });
      elements.cartCount.textContent = totalItems;
      elements.cartCount.style.display = totalItems ? 'flex' : 'none';

      if (!totalItems) {
        elements.cartBody.innerHTML = '<div class="cart-empty"><i class="fas fa-shopping-cart fa-3x"></i><h3>Your cart is empty</h3></div>';
      } else {
        let html = '';
        state.cart.forEach((item, key) => {
          const itemTotal = item.price * item.quantity;
          html += `
            <div class="cart-item">
              <div class="cart-item-image"><img src="${item.product.images[0]}" alt=""></div>
              <div class="cart-item-info">
                <div class="cart-item-name">${item.product.name}</div>
                <div class="cart-item-price">${utils.formatCurrency(item.price)} × ${item.quantity} ${item.product.unit}</div>
                <div class="cart-item-actions">
                  <button class="qty-btn" onclick="updateCartQty('${key}', -1)">-</button>
                  <span>${item.quantity}</span>
                  <button class="qty-btn" onclick="updateCartQty('${key}', 1)">+</button>
                  <button class="remove-item" onclick="removeFromCart('${key}')"><i class="fas fa-trash"></i> Remove</button>
                </div>
              </div>
              <div style="font-weight:700; margin-left:8px;">${utils.formatCurrency(itemTotal)}</div>
            </div>
          `;
        });
        elements.cartBody.innerHTML = html;
      }

      elements.cartSubtotal.textContent = utils.formatCurrency(subtotal);
      elements.cartTotal.textContent = utils.formatCurrency(subtotal);
      
      updateWhatsAppLink(subtotal);
    }

    window.updateCartQty = (key, delta) => {
      const item = state.cart.get(key);
      if (!item) return;
      item.quantity += delta;
      if (item.quantity <= 0) state.cart.delete(key);
      utils.saveCart();
      updateCartUI();
    };

    window.removeFromCart = (key) => {
      state.cart.delete(key);
      utils.saveCart();
      updateCartUI();
      utils.showToast('Item removed', 'warning');
    };

    elements.clearCartBtn.addEventListener('click', () => {
      if (state.cart.size && confirm('Clear cart?')) {
        state.cart.clear();
        utils.saveCart();
        updateCartUI();
        utils.showToast('Cart cleared', 'info');
      }
    });

    // ===== WISHLIST =====
    window.toggleWishlist = (productId) => {
      if (state.wishlist.has(productId)) {
        state.wishlist.delete(productId);
        utils.showToast('Removed from wishlist', 'info');
      } else {
        state.wishlist.add(productId);
        utils.showToast('Added to wishlist', 'success');
      }
      utils.saveWishlist();
      renderProducts();
    };

    // ===== QUICK VIEW =====
    window.quickView = (productId) => {
      const product = state.allProducts.find(p => p.id === productId);
      if (!product) return;
      const price = utils.getPrice(product);
      const minQty = product.moq || 1;
      const stockClass = product.stock > 20 ? 'in-stock' : product.stock > 0 ? 'low-stock' : 'out-of-stock';
      const stockText = product.stock > 20 ? 'In Stock' : product.stock > 0 ? `Low Stock (${product.stock})` : 'Out of Stock';

      const imageHTML = product.images.length > 1 ? `
        <div class="swiper quick-view-slider" style="height:250px; margin-bottom:16px;">
          <div class="swiper-wrapper">
            ${product.images.map(img => `<div class="swiper-slide"><img src="${img}" style="width:100%; height:100%; object-fit:cover;"></div>`).join('')}
          </div>
          <div class="swiper-pagination"></div>
        </div>
      ` : `<img src="${product.images[0]}" style="width:100%; max-height:250px; object-fit:cover; border-radius:var(--radius-md); margin-bottom:16px;">`;

      elements.quickViewBody.innerHTML = `
        ${imageHTML}
        <h3 style="font-size:1.4rem; margin-bottom:8px;">${product.name}</h3>
        <div style="color:var(--gray); margin-bottom:12px;">${product.category} • ${product.subcategory || ''}</div>
        <p style="margin-bottom:16px;">${product.description}</p>
        <div style="display:flex; align-items:center; gap:8px; margin-bottom:16px;">
          <span style="font-size:1.8rem; font-weight:800; color:var(--primary);">${utils.formatCurrency(price)}</span>
          <span style="color:var(--gray);">/${product.unit}</span>
        </div>
        <div style="background:var(--light); padding:16px; border-radius:var(--radius-md); margin-bottom:20px;">
          <div><strong>Stock:</strong> ${product.stock} ${product.unit}s</div>
          <div><strong>MOQ:</strong> ${minQty} ${product.unit}s</div>
          <div><strong>Rating:</strong> ${product.rating}/5</div>
          <div><strong>Status:</strong> <span class="${stockClass}">${stockText}</span></div>
        </div>
        <div style="display:flex; gap:12px;">
          <button class="btn btn-primary" style="flex:1;" onclick="addToCart('${product.id}'); closeQuickView();">Add to Cart</button>
          <button class="btn btn-outline" style="flex:1;" onclick="buyNow('${product.id}')">Buy Now</button>
        </div>
      `;

      if (product.images.length > 1) {
        setTimeout(() => new Swiper('.quick-view-slider', {
          slidesPerView: 1,
          loop: true,
          pagination: { el: '.swiper-pagination', clickable: true }
        }), 100);
      }

      elements.quickViewModal.classList.add('active');
      document.body.classList.add('no-scroll');
    };

    window.closeQuickView = () => {
      elements.quickViewModal.classList.remove('active');
      document.body.classList.remove('no-scroll');
    };
    elements.quickViewClose.addEventListener('click', closeQuickView);

    window.buyNow = (productId) => {
      const product = state.allProducts.find(p => p.id === productId);
      if (!product) return;
      const price = utils.getPrice(product);
      const minQty = product.moq || 1;
      const total = price * minQty;
      const message = `Hi Orji Supplies, I want to order:\nProduct: ${product.name}\nQuantity: ${minQty} ${product.unit}\nPrice: ${utils.formatCurrency(price)}/${product.unit}\nTotal: ${utils.formatCurrency(total)}\nI prefer Cash on Delivery.`;
      window.open(`https://wa.me/${CONFIG.whatsappNumber}?text=${encodeURIComponent(message)}`, '_blank');
      closeQuickView();
    };

    // ===== SEARCH HANDLER =====
    function handleSearch(term) {
      state.searchTerm = term;
      applyFilters(); // instantly filters and renders all matching products
      if (elements.headerSearchInput) elements.headerSearchInput.value = term;
      if (term) utils.showToast(`Searching for "${term}"`, 'info');
    }

    // Prominent search
    elements.prominentSearchBtn.addEventListener('click', () => {
      const term = elements.prominentSearchInput.value.trim();
      handleSearch(term);
    });
    elements.prominentSearchInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        const term = elements.prominentSearchInput.value.trim();
        handleSearch(term);
      }
    });
    // Optional: debounced search as user types
    elements.prominentSearchInput.addEventListener('input', utils.debounce(() => {
      const term = elements.prominentSearchInput.value.trim();
      handleSearch(term);
    }, 400));

    // Header search (if used)
    if (elements.headerSearchBtn) {
      elements.headerSearchBtn.addEventListener('click', () => {
        const term = elements.headerSearchInput.value.trim();
        handleSearch(term);
        if (elements.prominentSearchInput) elements.prominentSearchInput.value = term;
      });
      elements.headerSearchInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          const term = elements.headerSearchInput.value.trim();
          handleSearch(term);
          if (elements.prominentSearchInput) elements.prominentSearchInput.value = term;
        }
      });
    }

    // ===== CART SIDEBAR =====
    elements.cartBtn.addEventListener('click', () => {
      elements.cartSidebar.classList.add('open');
      elements.cartOverlay.classList.add('active');
      document.body.classList.add('no-scroll');
    });
    const closeCart = () => {
      elements.cartSidebar.classList.remove('open');
      elements.cartOverlay.classList.remove('active');
      document.body.classList.remove('no-scroll');
    };
    elements.cartClose.addEventListener('click', closeCart);
    elements.cartOverlay.addEventListener('click', closeCart);

    // ===== MOBILE MENU =====
    elements.menuToggle.addEventListener('click', () => {
      elements.mobileMenu.classList.toggle('active');
    });
    document.querySelectorAll('.mobile-nav-link').forEach(link => {
      link.addEventListener('click', () => elements.mobileMenu.classList.remove('active'));
    });

    // ===== FILTERS =====
    elements.sortSelect.addEventListener('change', e => { state.sortBy = e.target.value; applyFilters(); });
    elements.stockFilter.addEventListener('change', e => { state.stockFilter = e.target.value; applyFilters(); });

    // ===== NEWSLETTER SUBSCRIPTION =====
    elements.newsletterForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const email = e.target.querySelector('input').value;
      window.location.href = `mailto:orjiisupplies@gmail.com?subject=Newsletter%20Subscription&body=Email:%20${encodeURIComponent(email)}%0A%0APlease%20add%20me%20to%20your%20newsletter.`;
      utils.showToast('Subscription email opened', 'success');
      e.target.reset();
    });

    // ===== LANGUAGE SWITCHER =====
    function setLanguage(lang) {
      state.language = lang;
      document.body.classList.toggle('tigrinya', lang === 'ti');
      document.querySelectorAll('.language-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
      });

      document.querySelectorAll('[data-en]').forEach(el => {
        const key = el.dataset[lang] || el.dataset.en;
        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA' || el.tagName === 'SELECT') {
          if (el.placeholder !== undefined) el.placeholder = key;
        } else if (el.tagName === 'OPTION') {
          el.textContent = key;
        } else {
          el.innerHTML = key;
        }
      });

      document.querySelectorAll('.btn span, .mobile-nav-link span, .cart-header h3, .summary-row span:first-child, .footer-section h3, .footer-links a, .contact-info span').forEach(el => {
        const parent = el.closest('[data-en]') || el;
        if (parent.dataset && parent.dataset[lang]) {
          el.textContent = parent.dataset[lang];
        }
      });

      document.querySelectorAll('select option[data-en]').forEach(opt => {
        opt.textContent = opt.dataset[lang] || opt.dataset.en;
      });

      utils.showToast(lang === 'en' ? 'Language changed' : 'ቋንቋ ተለወጠ', 'success');
    }

    document.querySelectorAll('.language-btn').forEach(btn => {
      btn.addEventListener('click', () => setLanguage(btn.dataset.lang));
    });

    // ===== WHATSAPP ORDER MESSAGE =====
    function generateWhatsAppOrderMessage(subtotal) {
      let message = `Hi Orji Supplies, I would like to place an order:\n\n`;
      message += `Order Details:\n`;
      message += `====================\n`;
      
      state.cart.forEach((item, key) => {
        const itemTotal = item.price * item.quantity;
        message += `• ${item.product.name}\n`;
        message += `  Quantity: ${item.quantity} ${item.product.unit}\n`;
        message += `  Price: ${utils.formatCurrency(item.price)}/${item.product.unit}\n`;
        message += `  Total: ${utils.formatCurrency(itemTotal)}\n\n`;
      });
      
      message += `====================\n`;
      message += `Subtotal: ${utils.formatCurrency(subtotal)}\n`;
      message += `TOTAL: ${utils.formatCurrency(subtotal)}\n\n`;
      message += `Thank you!`;
      
      return message;
    }

    function updateWhatsAppLink(subtotal) {
      const message = generateWhatsAppOrderMessage(subtotal);
      elements.whatsappCheckout.href = `https://wa.me/${CONFIG.whatsappNumber}?text=${encodeURIComponent(message)}`;
    }

    // ===== INIT =====
    async function init() {
      utils.loadWishlist();
      await loadProducts();
      utils.loadCart();
      updateCartUI();
      setLanguage('en');
      elements.filterBtn.addEventListener('click', () => {
        utils.showToast('Advanced filters coming soon', 'info');
      });
    }

    init();
  </script>
</body>
</html>
